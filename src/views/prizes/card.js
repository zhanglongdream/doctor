function LuckyCard (settings, callback) {
  this.cover = null
  this.ctx = null
  this.scratchDiv = null
  this.cardDiv = null
  this.cHeight = 0
  this.cWidth = 0
  this.supportTouch = false
  this.events = []
  this.startEventHandler = null
  this.moveEventHandler = null
  this.endEventHandler = null
  this.opt = {
    coverColor: '#C5C5C5',
    coverImg: 'data:image/png;base64,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',
    ratio: 0.8,
    callback: null
  }
  this.init(settings, callback)
}

function _calcArea (ctx, callback, ratio) {
  var pixels = ctx.getImageData(0, 0, this.cWidth, this.cHeight)
  var transPixels = []
  _forEach(pixels.data, function (item, i) {
    var pixel = pixels.data[i + 3]
    if (pixel === 0) {
      transPixels.push(pixel)
    }
  })
  console.log(transPixels.length / pixels.data.length)
  console.log(ratio)
  if (transPixels.length / pixels.data.length > 0.05) {
    callback && typeof callback === 'function' && callback()
  }
}

function _forEach (items, callback) {
  return Array.prototype.forEach.call(items, function (item, idx) {
    callback(item, idx)
  })
}

// function _isCanvasSupported () {
//   var elem = document.createElement('canvas')
//   return !!(elem.getContext && elem.getContext('2d'))
// }
function _startEventHandler (event) {
  event.preventDefault()
  this.moveEventHandler = _moveEventHandler.bind(this)
  this.cover.addEventListener(this.events[1], this.moveEventHandler, false)
  this.endEventHandler = _endEventHandler.bind(this)
  document.addEventListener(this.events[2], this.endEventHandler, false)
}
function _moveEventHandler (event) {
  event.preventDefault()
  var evt = this.supportTouch ? event.touches[0] : event
  var coverPos = this.cover.getBoundingClientRect()
  var pageScrollTop = document.documentElement.scrollTop || document.body.scrollTop
  var pageScrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft
  var mouseX = evt.pageX - coverPos.left - pageScrollLeft
  var mouseY = evt.pageY - coverPos.top - pageScrollTop
  // this.ctx.beginPath()
  // this.ctx.fillStyle = '#FFFFFF'
  this.ctx.globalCompositeOperation = 'destination-out'
  // this.ctx.arc(mouseX, mouseY, 10, 0, 2 * Math.PI)
  // this.ctx.fill()
  this.ctx.beginPath()
  var radgrad = this.ctx.createRadialGradient(mouseX, mouseY, 0, mouseX, mouseY, 30)
  radgrad.addColorStop(0, 'rgba(0,0,0,0.6)')
  radgrad.addColorStop(1, 'rgba(255, 255, 255, 0)')
  this.ctx.fillStyle = radgrad
  this.ctx.arc(mouseX, mouseY, 30, 0, Math.PI * 2, true)
  this.ctx.fill()
};
function _endEventHandler (event) {
  event.preventDefault()
  if (this.opt.callback && typeof this.opt.callback === 'function') _calcArea.call(this, this.ctx, this.opt.callback, this.opt.ratio)
  this.cover.removeEventListener(this.events[1], this.moveEventHandler, false)
  document.removeEventListener(this.events[2], this.endEventHandler, false)
}
LuckyCard.prototype.createCanvas = function () {
  this.cover = document.createElement('canvas')
  this.cover.id = 'cover'
  this.cover.height = this.cHeight
  this.cover.width = this.cWidth
  this.ctx = this.cover.getContext('2d')
  if (this.opt.coverImg) {
    var _this = this
    var coverImg = new Image()
    coverImg.src = this.opt.coverImg
    coverImg.onload = function () {
      _this.ctx.drawImage(coverImg, 0, 0, _this.cover.width, _this.cover.height)
    }
    coverImg.onerror = function () {
    }
  } else {
    this.ctx.fillStyle = this.opt.coverColor
    this.ctx.fillRect(0, 0, this.cover.width, this.cover.height)
  }
  this.scratchDiv.appendChild(this.cover)
  var covers = document.getElementById('cover')
  covers.style.position = 'absolute'
  covers.style.left = '0'
  covers.style.top = '0'
  this.cardDiv.style.opacity = 1
}
LuckyCard.prototype.eventDetect = function () {
  if ('ontouchstart' in window) this.supportTouch = true
  this.events = this.supportTouch ? ['touchstart', 'touchmove', 'touchend'] : ['mousedown', 'mousemove', 'mouseup']
  this.addEvent()
}
LuckyCard.prototype.addEvent = function () {
  this.startEventHandler = _startEventHandler.bind(this)
  this.cover.addEventListener(this.events[0], this.startEventHandler, false)
}
LuckyCard.prototype.clearCover = function () {
  this.ctx.clearRect(0, 0, this.cover.width, this.cover.height)
  this.cover.removeEventListener(this.events[0], this.startEventHandler)
  this.cover.removeEventListener(this.events[1], this.moveEventHandler)
  this.cover.removeEventListener(this.events[2], this.endEventHandler)
}
LuckyCard.prototype.init = function (settings, callback) {
  var _this = this
  _forEach(arguments, function (item) {
    if (typeof item === 'object') {
      for (var k in item) {
        if (k === 'callback' && typeof item[k] === 'function') {
          _this.opt.callback = item[k].bind(_this)
        } else {
          k in _this.opt && (_this.opt[k] = item[k])
        }
      }
    } else if (typeof item === 'function') {
      _this.opt.callback = item.bind(_this)
    }
  })
  this.scratchDiv = document.getElementById('scratch')
  this.cardDiv = document.getElementById('card')
  if (!this.scratchDiv || !this.cardDiv) return
  this.cHeight = this.cardDiv.clientHeight
  this.cWidth = this.cardDiv.clientWidth
  this.cardDiv.style.opacity = 0
  this.createCanvas()
  this.eventDetect()
}
export default LuckyCard.case = function (settings, callback) {
  return new LuckyCard(settings, callback)
}
